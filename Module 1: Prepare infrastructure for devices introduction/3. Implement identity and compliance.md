# Manage Roles in Intune (Role-Based Access Control in Entra ID)
Role-Based Access Control (RBAC) is the system used to delegate administrative permissions within Microsoft Intune. It is built on and integrated with Microsoft Entra ID. To ensure the principle of least privilege by granting users or groups only the permissions they absolutely need to perform their jobs.

## Key Capabilities:
- **Role-Based Access Control (RBAC)**: Entra ID uses RBAC to assign permissions based on roles rather than individual user settings. This simplifies management and improves security.
- **Built-in roles**: Microsoft provides over 100 predefined roles like Global Administrator, User Administrator, Application Administrator, and Security Reader. Each has specific permissions tailored to common tasks
- **Custom roles**: Organizations can create custom roles with granular permissions to meet unique operational needs.
- **Role assignment**: Roles can be assigned to users, groups, or service principals. Assignments can be scoped to the entire tenant or limited to specific administrative units or resources.
- **Just-In-Time (JIT) role activation**: Enables time-bound, approval-based access to privileged roles via Entra ID's Privileged Identity Management (PIM), enforcing least privilege with MFA, audit logging, and reduced standing access.
- **Least privilege principle**: Entra ID encourages assigning only the minimum necessary permissions to reduce risk and improve compliance.

## "Privileged" Roles
Roles marked as **Privileged** have elevated access that can impact tenant-wide configurations and security. These roles should be governed with extra caution:

- **Elevated Access**: Can manage sensitive resources like identity settings, enterprise apps, and security configurations.
- **Governance via PIM**: Supports JIT access, approval workflows, and audit trails.
- **Examples**:
  - Global Administrator
  - Application Administrator
  - Security Administrator
  - Privileged Role Administrator

## Common Built-In Roles

| Role Name                      | Description                                                                 |
|--------------------------------|-----------------------------------------------------------------------------|
| **Global Administrator**       | Full access to all Entra ID features and settings.                         |
| **User Administrator**         | Manage users, groups, and password resets.                                 |
| **Application Administrator**  | Manage enterprise applications and app registrations.                      |
| **Groups Administrator**       | Create, manage, and delete groups and memberships.                         |
| **Authentication Administrator** | Manage MFA settings and authentication methods.                         |
| **Privileged Role Administrator** | Assign roles and manage role settings.                              |

> Microsoft Entra includes over **100 built-in roles**, each tailored to specific administrative tasks.

> ğŸ“š **References**
> - [Microsoft Entra built-in roles](https://learn.microsoft.com/en-us/entra/identity/role-based-access-control/permissions-reference)
> - [Create and manage custom roles in Microsoft Entra ID](https://learn.microsoft.com/en-us/entra/identity/role-based-access-control/custom-roles)
> - [RBAC overview for Microsoft Entra](https://learn.microsoft.com/en-us/entra/identity/role-based-access-control/overview)


# Implement compliance policies
# Implement Conditional Access policies
## What is Conditional Access
**Conditional Access (CA)** is a security feature in Microsoft Entra ID (formerly Azure AD) that helps control how users access cloud apps and resources based on specific conditions. When integrated with Intune, it adds device compliance and app management signals to the decision-making process. 
- **Purpose**: Protect organizational resources by allowing access only when specific conditions are met.
- **Signals used**: User/group, device compliance, location, app sensitivity, sign-in risk, etc.

> **Example**: If a user logs in from outside the office or from an unmanaged laptop, then require MFA or block access. <br>
> It combines identity, device, location, and app signals to protect access.

## Common Scenarios for Conditional Access
- **Require compliant device**: Only allow access to M365 apps if the device meets Intune compliance policies.
- **Restrict access by location**: Block access from non-corporate or geo-restricted IPs.
- **App-based CA**: Allow access only via approved apps like Outlook mobile.
- **Based on network location**: Allow access only from trusted IP ranges (e.g., corporate VPN or office IPs); block or enforce MFA for unknown networks.
- **Based on device trust**: Grant access only if the device is hybrid Azure AD joined or marked as trusted (e.g., via certificate or compliance state).

## Compliance with or without Conditional Access

| Scenario                    | Behavior                                                                 |
|----------------------------|--------------------------------------------------------------------------|
| **With Conditional Access**    | Access is granted only if the device is compliant with Intune policies (e.g., encryption, OS version, antivirus). |
| **Without Conditional Access** | Devices may be non-compliant but still access corporate resources, reducing security posture. |

> **Note**: Compliance policies alone evaluate device health; Conditional Access enforces access decisions based on that evaluation.

## Conditional Access Policy Settings
CA policies are configured in two main ways:
- **Wizard (Manual setup)** â€” you build it step by step.
- **Templates (Prebuilt)** â€” Microsoft provides recommended secure configurations (you can edit them later).

## Wizard
Each wizard step = a part of your policy logic.

### Step 1: Name
Give your policy a clear name that describes what it does.

> **Example**: â€œRequire MFA for External Sign-insâ€ or â€œBlock Legacy Authentication Clientsâ€

### Step 2: Assignments
Who the policy applies to.
- **All users** â€“ policy applies to everyone.
- **Selected users/groups** â€“ choose specific people or departments.
- **Directory roles** â€“ apply to specific admin roles (like Global Admin, User Admin, etc.).

> **Example**: Apply policy only to â€œFinance Teamâ€ group or â€œGlobal Administrators.â€

### Step 3: Target Resources
Decide what the policy protects â€” which apps or actions.

Select what this policy applies to:<br>

**1. Cloud Apps or Resources**
- **All cloud apps** â€“ everything in Microsoft 365 / Azure.
- **Select specific apps** â€“ e.g., SharePoint, Exchange Online.
- **All internet resources** â€“ for Global Secure Access.

> **Example**: Apply policy only for â€œMicrosoft 365 Exchange Onlineâ€ â€” so users must meet conditions only when accessing email.

**2. User Actions** These are special actions, not apps:
- Register security info (e.g., setting up MFA)
- Register or join devices (e.g., Azure AD join)

> **Example**: Force MFA when users try to register security info for the first time.

**3. Authentication context**
Used by advanced apps like SharePoint to protect sensitive actions (e.g., downloading confidential files).

### Step 4: Network
Choose which network or location the rule applies to.
- **Include**: any network, trusted networks, compliant networks, selected IPs.
- **Exclude**: e.g., corporate office IPs or trusted VPNs.

> **Example**: Allow login without MFA if user is at office (trusted IP), but require MFA if outside (e.g., coffee shop or home).

### Step 5: Conditions
Fine-tune based on sign-in context.

**1. Device platforms** Choose OS platforms: Android / iOS / Windows / macOS / Linux
> Example:Allow iOS and Android but block Linux devices.

**2. Locations** Choose specific physical/geographic areas or IPs.
> **Example**:Block logins from outside Bangladesh. Or allow only â€œTrusted Location â€“ Dhaka HQ.â€

**3. Client Apps** Choose which client types are affected:
- **Modern clients** (Browser, Outlook, Teams)
- **Legacy clients** (old protocols that donâ€™t support MFA)

**4. Filter for Devices** Use Intune dynamic rules to include/exclude devices.
> **Example**: Include only devices where `device.deviceOwnership -eq "Corporate"`

**5. Authentication Flows** Covers specific sign-in flows like â€œDevice Code Flowâ€ (used by some command-line apps).
> **Example:** Block device code flow sign-ins for unmanaged apps to prevent token abuse.

### Step 6: Access Controls
Define what happens if conditions are met.

**1. Grant Controls**
- **Block access** â€“ deny outright.
- **Grant access** â€“ allow but add requirements:
  - Require MFA
  - Require compliant device (via Intune)
  - Require hybrid Azure AD joined device
  - Require approved app
  - Require app protection policy

> **Examples**:
> - Require MFA - If login from new country â†’ prompt for MFA
> - Require compliant device - Only allow access from company-managed laptops
> - Require approved app - Allow access via Outlook app but not Apple Mail
> - Block access - Block users on personal devices without MDM

**2. Session Controls**
Customize user session behavior:
- **Sign-in frequency** (e.g., reauthenticate every 8 hours)
- **Persistent browser session** (stay signed in across browser restarts)
- **App enforced restrictions** (limit SharePoint file download)
- **Token protection** (protect tokens from theft)
- **Continuous access evaluation (CAE)** â€“ instantly revoke access if conditions change (e.g., password reset, risk detected)

> **Example**: Allow users to stay signed in for 8 hours but recheck device compliance every time CAE triggers.
    
### Step 7: Enable Policy  
Final step:
- **Off** â€“ policy created but not active.
- **On** â€“ enforced.
- **Report-only** â€“ test mode; logs results but doesnâ€™t block access.

> **Example**: Always use â€œReport-onlyâ€ first to test before applying to production.

### Templates
Microsoft provides ready-to-use templates to simplify deployment. Each template contains pre-configured settings (e.g., block legacy auth, require MFA, enforce compliant devices).

**Templates**:
- **Secure Foundation** Baseline protection for all users.
- **Zero Trust** Aligns with Zero Trust principles (verify every access).
- **Remort Work** Focus on remote workforce security.
- **Protect Administrator** Strengthens protection for privileged accounts.
- **Emerging threats** Helps respond to new identity threats.

**Propraties**: 
  - Require multifactor authentication for admins
  - Securing security info registration
  - Block legacy authentication
  - Require multifactor authentication for all users
  - Require multifactor authentication for Azure management
  - Require compliant or hybrid Azure AD joined device or multifactor authentication for all users
  - Require MDM-enrolled and compliant device to access cloud apps for all users (Preview)
  - Require multifactor authentication for guest access
  - Require multifactor authentication for Microsoft admin portals
  - Block access for unknown or unsupported device platform
  - No persistent browser session
  - Use application enforced restrictions for O365 apps
  - Require compliant or hybrid Azure AD joined device for admins
  - Require phishing-resistant multifactor authentication for admins

> **Example**: Use the â€œProtect Administratorâ€ template to instantly apply MFA and block legacy authentication for all Global Administrators.

## Additional | Scope Tags & Administrative Units

### Scope Tags (Intune)
- **Purpose**: Control visibility of Intune resources (policies, profiles, devices) for RBAC-assigned admins.
- **Use case**: In a multi-tenant or departmental setup, ensure HR admins only see HR devices and policies.

### Administrative Units (Entra ID)
- **Purpose**: Delegate user and group management within a defined boundary (e.g., region, department).
- **Use case**: Assign a helpdesk admin rights to reset passwords only for users in the â€œSalesâ€ unit.

# Configure Windows Hello for Business, SSPR and MFA
# Implement and manage LAPS and local group membership
# Synchronizing on-premises users and groups
